<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è!</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π -->
  <div class="screen" id="intro-screen">
    <div class="screen-content">
      <h1>üíå –°–µ–∫—Ä–µ—Ç–Ω–æ–µ –ø–∏—Å—å–º–æ </h1>
      <p>–ß—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ—Å–ª–∞–Ω–∏–µ, —Å–æ–±–µ—Ä–∏ 10 —Å–µ—Ä–¥–µ—á–µ–∫ –∑–∞ 10 —Å–µ–∫—É–Ω–¥!</p>
      <button onclick="startGame()" class="btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É!</button>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø–æ—Ä–∞–∂–µ–Ω–∏—è -->
  <div class="screen hidden" id="game-over-screen">
    <div class="screen-content">
      <h1>üò¢ –£–ø—Å... –¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∞</h1>
      <button onclick="restartGame()" class="btn">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â—ë —Ä–∞–∑!</button>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã -->
  <div class="screen hidden" id="victory-screen">
    <div class="screen-content">
      <h1>üéâ –£–º–Ω–∏—á–∫–∞! –¢—ã –ø—Ä–æ—à–ª–∞!</h1>
      <button onclick="showLetter()" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–∏—Å—å–º—É üíñ</button>
    </div>
  </div>

  <!-- –ò–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
  <div class="game-ui hidden">
    <div class="score">–°–æ–±—Ä–∞–Ω–æ: <span id="score">0</span>/10</div>
    <div class="timer">–í—Ä–µ–º—è: <span id="timer">10</span>—Å</div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="hearts"></div>
  <div class="text-container hidden">
    <div id="typewriter"><span id="content"></span><span class="cursor">|</span></div>
  </div>

  <script>
  const config = {
    targetHearts: 10,
    gameTime: 10,
    heartSize: { min: 1, max: 5 }
  };

  let score = 0;
  let timeLeft = config.gameTime;
  let isGameActive = false;

  // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  const elements = {
    intro: document.getElementById('intro-screen'),
    gameUI: document.querySelector('.game-ui'),
    gameOver: document.getElementById('game-over-screen'),
    victory: document.getElementById('victory-screen'),
    textContainer: document.querySelector('.text-container'),
    score: document.getElementById('score'),
    timer: document.getElementById('timer')
  };

  // –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
  function startGame() {
    elements.intro.classList.add('hidden');
    elements.gameUI.classList.remove('hidden');
    resetGameState();
    isGameActive = true;
    startGameLoop();
    createGameHeart();
  }

  // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
  function resetGameState() {
    score = 0;
    timeLeft = config.gameTime;
    elements.score.textContent = '0';
    elements.timer.textContent = '10';
    document.querySelectorAll('.game-heart').forEach(heart => heart.remove());
  }

  // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
  function startGameLoop() {
    const gameInterval = setInterval(() => {
      if (!isGameActive) {
        clearInterval(gameInterval);
        return;
      }
      
      timeLeft--;
      elements.timer.textContent = timeLeft;
      
      if(timeLeft <= 0) {
        endGame(false);
        clearInterval(gameInterval);
      }
    }, 1000);
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Ä–¥–µ—Ü
  function createGameHeart() {
    if (!isGameActive) return;
    
    const heart = document.createElement('div');
    heart.className = 'game-heart';
    heart.style.left = `${Math.random() * 90}%`;
    heart.style.top = `${Math.random() * 90}%`;
    
    heart.addEventListener('click', () => {
      if (!isGameActive) return;
      score++;
      elements.score.textContent = score;
      heart.remove();
      if(score >= config.targetHearts) endGame(true);
    });

    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 500);
    setTimeout(createGameHeart, 500);
  }

  // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
  function endGame(isWin) {
    isGameActive = false;
    elements.gameUI.classList.add('hidden');
    
    if(isWin) {
      elements.victory.classList.remove('hidden');
    } else {
      elements.gameOver.classList.remove('hidden');
    }
  }

  // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
  function restartGame() {
    elements.gameOver.classList.add('hidden');
    startGame();
  }

  // –ü–æ–∫–∞–∑ –ø–∏—Å—å–º–∞
  function showLetter() {
    elements.victory.classList.add('hidden');
    document.body.style.background = "#1e1e2f";
    elements.textContainer.classList.remove('hidden');
    startLetterAnimation();
    setInterval(createHeart, 300);
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫
  function createHeart() {
    const heart = document.createElement("img");
    heart.src = "img/heart.png";
    heart.className = "heart";
    
    const size = Math.random() * 4 + 1;
    const speed = 4 + Math.random() * 3;
    
    heart.style.width = `${size}vw`;
    heart.style.left = `${Math.random() * 100}%`;
    heart.style.animationDuration = `${speed}s`;
    
    document.querySelector(".hearts").appendChild(heart);
    setTimeout(() => heart.remove(), speed * 1000);
  }

  // –ê–Ω–∏–º–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–∏—Å—å–º–∞
  function startLetterAnimation() {
    const lines = [
      "–î–æ—Ä–æ–≥–∞—è, —Å –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è!",
      "–°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ —Ç–≤–æ—é –¥–æ–±—Ä–æ—Ç—É –∏ —Ç–µ–ø–ª–æ.",
      "–¢—ã ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ —á—É–¥–æ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏.",
      "–ü—É—Å—Ç—å —Ç–≤–æ—è —É–ª—ã–±–∫–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≥–∞—Å–Ω–µ—Ç.",
      "–Ø –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞ –∫–∞–∂–¥–æ–µ –º–≥–Ω–æ–≤–µ–Ω–∏–µ —Å —Ç–æ–±–æ–π. –∞–≤—ã–∞  —ã–≤ –∞—ã–≤ –∞—ã –≤–∞ —ã–≤–∞ –æ–ª—ã–≤–∞–æ–ª —Ü—ã—Ñ–≤–ª–∏–∞–∂–≤–∞–æ—Ñ—ã –æ–∞–æ–ª—ã–æ—Ñ –ª–æ–∞–ª –æ–ª—ã–≤–ª–æ–∏ –∞–ª—ã—Ñ–≤ –ª–æ–∞—ã—Ñ–≤ –∏–æ–∞"
    ];

    let lineIndex = 0;
    let charIndex = 0;
    const contentSpan = document.getElementById('content');
    contentSpan.textContent = '';

    function typeLine() {
      if (lineIndex >= lines.length) return;

      const currentLine = lines[lineIndex];
      if (charIndex < currentLine.length) {
        contentSpan.textContent += currentLine[charIndex];
        charIndex++;
        setTimeout(typeLine, 50);
      } else {
        contentSpan.textContent += '\n';
        charIndex = 0;
        lineIndex++;
        setTimeout(typeLine, 50);
      }
    }
    
    typeLine();
  }
  </script>
</body>
</html>
